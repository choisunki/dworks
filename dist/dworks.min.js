/*! dworks v1.0.0 */
var DWorks=(()=>{var I=Object.defineProperty;var Y=Object.getOwnPropertyDescriptor;var Z=Object.getOwnPropertyNames;var $=Object.prototype.hasOwnProperty;var ee=(a,r)=>{for(var e in r)I(a,e,{get:r[e],enumerable:!0})},re=(a,r,e,s)=>{if(r&&typeof r=="object"||typeof r=="function")for(let t of Z(r))!$.call(a,t)&&t!==e&&I(a,t,{get:()=>r[t],enumerable:!(s=Y(r,t))||s.enumerable});return a};var te=a=>re(I({},"__esModule",{value:!0}),a);var ne={};ee(ne,{calcAspectPad:()=>x,controlVideo:()=>f,create:()=>k,default:()=>oe,icons:()=>p,vdoTag:()=>m,video:()=>z});var w=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};function W(a,r){a=a||{},r=r||{};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(a[e]=r[e]);return a}function P(a,r){try{return(r||document).querySelector(a)}catch(e){return null}}function ae(a,r){try{return(r||document).querySelectorAll(a)}catch(e){return[]}}function X(a){return a&&a.tagName==="VIDEO"}function x(a){var r="56.25%",e=String(a||"16/9"),s=e.match(/^\s*(\d+(?:\.\d+)?)\s*\/\s*(\d+(?:\.\d+)?)\s*$/);if(!s)return r;var t=parseFloat(s[1]),v=parseFloat(s[2]);if(!isFinite(t)||!isFinite(v)||t<=0||v<=0)return r;var _=v/t*100;return!isFinite(_)||_<=0?r:_.toFixed(2)+"%"}function f(a,r){if(a){if(r){if(!a.paused&&!a.ended)return;try{var e=a.play();e&&typeof e.catch=="function"&&e.catch(function(){})}catch(s){}return}try{a.paused||a.pause()}catch(s){}}}var p={volume_on:['<svg class="ico ico-volume-on" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">','  <path d="M11 5L6.5 9H3v6h3.5L11 19V5z" fill="currentColor"/>','  <path d="M14.5 8.5a1 1 0 0 1 1.4-.1 6 6 0 0 1 0 7.2 1 1 0 1 1-1.5-1.2 4 4 0 0 0 0-4.8 1 1 0 0 1 .1-1.1z" fill="currentColor"/>','  <path d="M16.8 6.2a1 1 0 0 1 1.4-.1 9 9 0 0 1 0 11.8 1 1 0 1 1-1.5-1.2 7 7 0 0 0 0-9.2 1 1 0 0 1 .1-1.3z" fill="currentColor"/>',"</svg>"].join(""),volume_off:['<svg class="ico ico-volume-off" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">','  <path d="M11 5L6.5 9H3v6h3.5L11 19V5z" fill="currentColor"/>','  <path d="M14.2 9.2a1 1 0 0 1 1.4 0l1.8 1.8 1.8-1.8a1 1 0 1 1 1.4 1.4L18.8 12l1.8 1.8a1 1 0 1 1-1.4 1.4L17.4 13.4l-1.8 1.8a1 1 0 1 1-1.4-1.4L16 12l-1.8-1.8a1 1 0 0 1 0-1z" fill="currentColor"/>',"</svg>"].join("")};function m(a,r,e){var s={vid:"",controls:!1,muted:!0,autoplay:!0,playsinline:!0,loop:!0,vctrl:!0,preload:r&&(r.play_on_enter||r.pause_on_leave)?"metadata":"auto",wrapClass:"vdo__wrap",a11yLabel:"\uBE0C\uB79C\uB4DC \uC601\uC0C1",ratio:"16/9",fit:"cover",poster:""},t=W(W({},s),r||{});e=e||p;var v=String(t.ratio||"16/9"),_=x(v);v.match(/^\s*(\d+(?:\.\d+)?)\s*\/\s*(\d+(?:\.\d+)?)\s*$/)||(v="16/9",_="56.25%");var V=String(t.fit||"cover").toLowerCase();V!=="contain"&&(V="cover");var D="--ar:"+v+";--ar-pad:"+_+";--fit:"+V+";";t.vctrl&&!t.vid&&(t.vid="vdo_"+new Date().getTime()+"_"+Math.floor(Math.random()*1e5));var H=[t.vid?'id="'+t.vid+'"':"",'src="'+a+'"',t.preload?'preload="'+t.preload+'"':"",t.poster?'poster="'+t.poster+'"':"",t.controls?"controls":"",t.muted?"muted":"",t.autoplay?"autoplay":"",t.loop?"loop":"",t.playsinline?"playsinline":""].filter(function(n){return n!==""}).join(" "),O="";if(t.vctrl){var o=t.muted?" muted":"",i=t.vid;O=['<div class="ctrl'+o+'" data-target="'+i+'" role="group" aria-label="\uBE44\uB514\uC624 \uBCFC\uB968 \uC81C\uC5B4">','  <button type="button" class="vctrl vctrl-volume-off" data-action="unmute" aria-label="\uBCFC\uB968 \uCF1C\uAE30" aria-controls="'+i+'">','    <span class="vctrl-popover" role="tooltip">\uBCFC\uB968 \uCF1C\uAE30</span>',e.volume_on||"ON","  </button>",'  <button type="button" class="vctrl vctrl-volume-on" data-action="mute" aria-label="\uBCFC\uB968 \uB044\uAE30" aria-controls="'+i+'">','    <span class="vctrl-popover" role="tooltip">\uBCFC\uB968 \uB044\uAE30</span>',e.volume_off||"OFF","  </button>",'  <span class="sr-only vctrl-status" aria-live="polite" aria-atomic="true"></span>',"</div>"].join("")}return['<div class="'+t.wrapClass+'" style="'+D+'">','  <span class="vdo__spacer" aria-hidden="true"></span>',"  <video "+H+' class="video" aria-label="'+t.a11yLabel+'"></video>',O,"</div>"].join("")}function k(a){var r=W({vdos:[],icons:null,log:!1,viewportChecker:null},a||{}),e={_vctrlBound:!1,_vctrlHandler:null,_vdoObserver:null,_vdoMap:null};function s(){if(r.log)try{console.log.apply(console,arguments)}catch(o){}}function t(o){if(o){var i=document.getElementById(o);if(X(i)){var n=!!i.muted,l=ae('.ctrl[data-target="'+o+'"]');if(!(!l||!l.length))for(var d=0;d<l.length;d++){var c=l[d];c.classList&&(n?c.classList.add("muted"):c.classList.remove("muted"));try{c.setAttribute("aria-label","\uBE44\uB514\uC624 \uBCFC\uB968 \uC81C\uC5B4")}catch(T){}var u=c.querySelector(".vctrl-volume-off"),y=c.querySelector(".vctrl-volume-on"),L=c.querySelector(".vctrl-status");if(u)try{u.setAttribute("aria-hidden",String(!n)),u.setAttribute("tabindex",n?"0":"-1")}catch(T){}if(y)try{y.setAttribute("aria-hidden",String(n)),y.setAttribute("tabindex",n?"-1":"0")}catch(T){}L&&(L.textContent=n?"\uD604\uC7AC \uC74C\uC18C\uAC70 \uC0C1\uD0DC":"\uD604\uC7AC \uBCFC\uB968 \uCF1C\uC9D0 \uC0C1\uD0DC")}}}}function v(o,i){if(o){var n=document.getElementById(o);if(X(n)){n.muted=!i;try{i&&n.paused&&n.play()}catch(l){}t(o)}}}function _(){e._vctrlBound||(e._vctrlBound=!0,e._vctrlHandler=function(o){var i=o.target&&o.target.closest?o.target.closest(".ctrl .vctrl"):null;if(i){o.preventDefault&&o.preventDefault();var n=i.closest?i.closest(".ctrl"):null;if(n){var l=n.getAttribute("data-target"),d=i.getAttribute("data-action");l&&v(l,d==="unmute")}}},document.addEventListener("click",e._vctrlHandler,!1))}function V(o){if(!(!o||!o.length)){var i=typeof w.IntersectionObserver=="function";if(!i){var n=r.viewportChecker;if(!n||!n.enabled||!n.$)return;for(var l=n.$,d=n.pluginName||"viewportChecker",c=0;c<o.length;c++){var u=o[c];if(!(!u||!u.mount)&&!(!u.play_on_enter&&!u.pause_on_leave)){var y=u.observe||u.mount,L=l(y),T=l(u.mount);if(!(!L.length||!T.length)){var R=T.find("video").first();R.length&&(function(A,g,b){try{l(A)[d]({repeat:!0,callbackFunction:function(S,C){C==="add"?b.play_on_enter&&f(g,!0):b.pause_on_leave&&f(g,!1)}})}catch(S){}})(L.get(0),R.get(0),u)}}}return}if(e._vdoObserver){try{e._vdoObserver.disconnect()}catch(A){}e._vdoObserver=null}e._vdoMap=new WeakMap;var G=[0,.01,.1,.25,.35,.5,.75,1],B=new IntersectionObserver(function(A){for(var g=0;g<A.length;g++){var b=A[g],S=e._vdoMap.get(b.target);if(S){var C=S.videoEl,M=S.opt||{},Q=typeof M.view_threshold=="number"?M.view_threshold:.35,U=b.isIntersecting&&b.intersectionRatio>=Q;U?M.play_on_enter&&f(C,!0):M.pause_on_leave&&f(C,!1)}}},{threshold:G});e._vdoObserver=B;for(var F=0;F<o.length;F++){var h=o[F];if(!(!h||!h.mount)&&!(!h.play_on_enter&&!h.pause_on_leave)){var J=h.observe||h.mount,q=P(J);if(q){var N=P(h.mount);if(N){var K=N.querySelector("video");K&&(e._vdoMap.set(q,{videoEl:K,opt:h}),B.observe(q))}}}}}}function D(){for(var o=r.vdos||[],i=r.icons||p,n=0;n<o.length;n++){var l=o[n];if(!(!l||!l.code||!l.mount)){var d=m(l.code,l,i);if(l.vctrl!==!1&&!l.vid)try{var c=String(d||"").match(/<video\s+[^>]*id=\"([^\"]+)\"/i);c&&c[1]&&(l.vid=c[1])}catch(y){}var u=P(l.mount);u&&(u.innerHTML=d),l.vid&&t(l.vid)}}return _(),V(o),s("[dworks-video] init ok"),O}function H(){if(e._vdoObserver){try{e._vdoObserver.disconnect()}catch(o){}e._vdoObserver=null}if(e._vdoMap=null,e._vctrlHandler){try{document.removeEventListener("click",e._vctrlHandler,!1)}catch(o){}e._vctrlHandler=null}e._vctrlBound=!1,s("[dworks-video] destroy ok")}var O={init:D,destroy:H,vdoVolume:v,syncVctrlA11y:t,controlVideo:f,vdoTag:function(o,i){return m(o,i,r.icons||p)},icons:r.icons||p};return O}var j={create:k,controlVideo:f,vdoTag:function(a,r){return m(a,r,p)},icons:p,calcAspectPad:x};typeof w.__DWORKS_EXPORT__=="function"&&w.__DWORKS_EXPORT__(j);typeof w.window!="undefined"&&(w.DWorksVideo=w.DWorksVideo||j);var z=j;var E={video:z,createVideo:k,utils:{controlVideo:f,vdoTag:m,calcAspectPad:x,icons:p}};typeof globalThis!="undefined"&&typeof globalThis.window!="undefined"&&(globalThis.DWorks=globalThis.DWorks||E);var oe=E;return te(ne);})();
/*! dworks-video.js | ES5 | exporter handshake: window.__DWORKS_EXPORT__(mod) */
//# sourceMappingURL=dworks.min.js.map
