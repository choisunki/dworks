/*! dworks v1.1.1 */
var DWorks=(()=>{var z=Object.defineProperty;var le=Object.getOwnPropertyDescriptor;var ce=Object.getOwnPropertyNames;var ue=Object.prototype.hasOwnProperty;var de=(r,t)=>{for(var e in t)z(r,e,{get:t[e],enumerable:!0})},se=(r,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of ce(t))!ue.call(r,o)&&o!==e&&z(r,o,{get:()=>t[o],enumerable:!(n=le(t,o))||n.enumerable});return r};var fe=r=>se(z({},"__esModule",{value:!0}),r);var we={};de(we,{calcAspectPad:()=>A,controlVideo:()=>g,create:()=>I,default:()=>ke,icons:()=>h,vdoTag:()=>T,video:()=>X});var y=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};function R(r,t){r=r||{},t=t||{};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}function W(r,t){try{return(t||document).querySelector(r)}catch(e){return null}}function ee(r,t){try{return(t||document).querySelectorAll(r)}catch(e){return[]}}function E(r){return r&&r.tagName==="VIDEO"}function $(r,t,e){t=t||{};try{var n=e&&e.name?e.name:"Error",o=e&&e.message?e.message:String(e||"");console.warn("[DWorksVideo] \uC7AC\uC0DD \uC2E4\uD328:",n,o)}catch(c){}if(t.log)try{console.info("[DWorksVideo][debug] play-blocked detail:",{video:r,error:e||null})}catch(c){}if(typeof t.onPlaybackBlocked=="function")try{t.onPlaybackBlocked({video:r,error:e||null,reason:"play_blocked"})}catch(c){}if(typeof y.CustomEvent=="function")try{var i=new CustomEvent("dworks-video:play-blocked",{detail:{video:r,error:e||null,reason:"play_blocked"}});document.dispatchEvent(i)}catch(c){}}function N(r){if(r){var t=document.getElementById(r);if(E(t)){var e=!!t.muted,n=ee('.ctrl[data-target="'+r+'"]');if(!(!n||!n.length))for(var o=0;o<n.length;o++){var i=n[o];i.classList&&(e?i.classList.add("muted"):i.classList.remove("muted"));try{i.setAttribute("aria-label","\uBE44\uB514\uC624 \uBCFC\uB968 \uC81C\uC5B4")}catch(k){}var c=i.querySelector(".vctrl-volume-off"),_=i.querySelector(".vctrl-volume-on"),m=i.querySelector(".vctrl-status");if(c)try{c.setAttribute("aria-hidden",String(!e)),c.setAttribute("tabindex",e?"0":"-1")}catch(k){}if(_)try{_.setAttribute("aria-hidden",String(e)),_.setAttribute("tabindex",e?"-1":"0")}catch(k){}m&&(m.textContent=e?"\uD604\uC7AC \uC74C\uC18C\uAC70 \uC0C1\uD0DC":"\uD604\uC7AC \uBCFC\uB968 \uCF1C\uC9D0 \uC0C1\uD0DC")}}}}function H(r){var t=ee(".vdo__wrap .video");if(!(!t||!t.length))for(var e=0;e<t.length;e++){var n=t[e];if(E(n)&&!(r&&n.id===r)){try{n.muted=!0}catch(o){}n.id&&N(n.id)}}}function ve(r,t){if(typeof y.CustomEvent=="function")try{var e=new CustomEvent("dworks-media:unmute",{detail:{kind:r,id:t||""}});document.dispatchEvent(e)}catch(n){}}function te(r,t,e){if(r){var n=document.getElementById(r);if(E(n)){var o=!e||e.exclusiveAudio!==!1;t&&o&&(H(r),ve("video",r)),n.muted=!t,t&&n.paused&&g(n,!0,e),N(r)}}}var s={bound:!1,refs:0,handler:null},f={bound:!1,refs:0,handler:null},v={bound:!1,refs:0,handler:null};function pe(){if(s.bound){s.refs+=1;return}s.handler=function(r){var t=r.target&&r.target.closest?r.target.closest(".ctrl .vctrl"):null;if(t){r.preventDefault&&r.preventDefault();var e=t.closest?t.closest(".ctrl"):null;if(e){var n=e.getAttribute("data-target"),o=t.getAttribute("data-action");n&&te(n,o==="unmute")}}},document.addEventListener("click",s.handler,!1),s.bound=!0,s.refs=1}function ge(){if(s.bound&&(s.refs-=1,!(s.refs>0))){try{document.removeEventListener("click",s.handler,!1)}catch(r){}s.handler=null,s.bound=!1,s.refs=0}}function _e(r,t){if(r){var e=W(".vdo__wrap .video#"+r);if(e){var n=e.closest?e.closest(".vdo__wrap"):null;if(n){var o=n.querySelector(".vdo__tap-indicator");if(o){if(o._hideTimer){try{clearTimeout(o._hideTimer)}catch(i){}o._hideTimer=null}o.classList.remove("show");try{o.offsetWidth}catch(i){}o.classList.remove("is-play"),o.classList.remove("is-pause"),o.classList.add(t?"is-play":"is-pause"),o.classList.add("show"),o._hideTimer=setTimeout(function(){o.classList.remove("show"),o._hideTimer=null},640)}}}}}function he(){if(f.bound){f.refs+=1;return}f.handler=function(r){var t=r.target;if(!(!t||!t.closest)&&!t.closest(".ctrl")){var e=t.closest(".vdo__wrap .video");if(!(!e||!E(e))){var n=e.closest?e.closest(".vdo__wrap"):null;if(n&&n.getAttribute("data-click-toggle")==="1"){var o=!!(e.paused||e.ended);g(e,o),e.id&&_e(e.id,o)}}}},document.addEventListener("click",f.handler,!1),f.bound=!0,f.refs=1}function be(){if(f.bound&&(f.refs-=1,!(f.refs>0))){try{document.removeEventListener("click",f.handler,!1)}catch(r){}f.handler=null,f.bound=!1,f.refs=0}}function ye(){if(v.bound){v.refs+=1;return}v.handler=function(r){var t=r&&r.detail?r.detail:{},e=t.kind||"",n=t.id||"";if(e==="video"){H(n);return}e==="youtube"&&H("")},document.addEventListener("dworks-media:unmute",v.handler,!1),v.bound=!0,v.refs=1}function me(){if(v.bound&&(v.refs-=1,!(v.refs>0))){try{document.removeEventListener("dworks-media:unmute",v.handler,!1)}catch(r){}v.handler=null,v.bound=!1,v.refs=0}}function A(r){var t="56.25%",e=String(r||"16/9"),n=e.match(/^\s*(\d+(?:\.\d+)?)\s*\/\s*(\d+(?:\.\d+)?)\s*$/);if(!n)return t;var o=parseFloat(n[1]),i=parseFloat(n[2]);if(!isFinite(o)||!isFinite(i)||o<=0||i<=0)return t;var c=i/o*100;return!isFinite(c)||c<=0?t:c.toFixed(2)+"%"}function g(r,t,e){if(r){if(t){if(!r.paused&&!r.ended)return;try{var n=r.play();n&&typeof n.catch=="function"&&n.catch(function(o){$(r,e,o)})}catch(o){$(r,e,o)}return}try{r.paused||r.pause()}catch(o){}}}var h={volume_on:['<svg class="ico ico-volume-on" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">','  <path d="M11 5L6.5 9H3v6h3.5L11 19V5z" fill="currentColor"/>','  <path d="M14.5 8.5a1 1 0 0 1 1.4-.1 6 6 0 0 1 0 7.2 1 1 0 1 1-1.5-1.2 4 4 0 0 0 0-4.8 1 1 0 0 1 .1-1.1z" fill="currentColor"/>','  <path d="M16.8 6.2a1 1 0 0 1 1.4-.1 9 9 0 0 1 0 11.8 1 1 0 1 1-1.5-1.2 7 7 0 0 0 0-9.2 1 1 0 0 1 .1-1.3z" fill="currentColor"/>',"</svg>"].join(""),volume_off:['<svg class="ico ico-volume-off" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">','  <path d="M11 5L6.5 9H3v6h3.5L11 19V5z" fill="currentColor"/>','  <path d="M14.2 9.2a1 1 0 0 1 1.4 0l1.8 1.8 1.8-1.8a1 1 0 1 1 1.4 1.4L18.8 12l1.8 1.8a1 1 0 1 1-1.4 1.4L17.4 13.4l-1.8 1.8a1 1 0 1 1-1.4-1.4L16 12l-1.8-1.8a1 1 0 0 1 0-1z" fill="currentColor"/>',"</svg>"].join("")};function T(r,t,e){var n={vid:"",controls:!1,muted:!0,autoplay:!0,playsinline:!0,loop:!0,vctrl:!0,click_toggle:!1,preload:t&&(t.play_on_enter||t.pause_on_leave)?"metadata":"auto",wrapClass:"vdo__wrap",a11yLabel:"\uBE0C\uB79C\uB4DC \uC601\uC0C1",ratio:"16/9",fit:"cover",poster:""},o=R(R({},n),t||{});e=e||h;var i=String(o.ratio||"16/9"),c=A(i);i.match(/^\s*(\d+(?:\.\d+)?)\s*\/\s*(\d+(?:\.\d+)?)\s*$/)||(i="16/9",c="56.25%");var _=String(o.fit||"cover").toLowerCase();_!=="contain"&&(_="cover");var m="--ar:"+i+";--ar-pad:"+c+";--fit:"+_+";",k=o.click_toggle?' data-click-toggle="1"':"";o.vctrl&&!o.vid&&(o.vid="vdo_"+new Date().getTime()+"_"+Math.floor(Math.random()*1e5));var q=[o.vid?'id="'+o.vid+'"':"",'src="'+r+'"',o.preload?'preload="'+o.preload+'"':"",o.poster?'poster="'+o.poster+'"':"",o.controls?"controls":"",o.muted?"muted":"",o.autoplay?"autoplay":"",o.loop?"loop":"","playsinline","webkit-playsinline"].filter(function(u){return u!==""}).join(" "),x="";if(o.vctrl){var D=o.muted?" muted":"",a=o.vid;x=['<div class="ctrl'+D+'" data-target="'+a+'" role="group" aria-label="\uBE44\uB514\uC624 \uBCFC\uB968 \uC81C\uC5B4">','  <button type="button" class="vctrl vctrl-volume-off" data-action="unmute" aria-label="\uBCFC\uB968 \uCF1C\uAE30" aria-controls="'+a+'">','    <span class="vctrl-popover" role="tooltip">\uBCFC\uB968 \uCF1C\uAE30</span>',e.volume_on||"ON","  </button>",'  <button type="button" class="vctrl vctrl-volume-on" data-action="mute" aria-label="\uBCFC\uB968 \uB044\uAE30" aria-controls="'+a+'">','    <span class="vctrl-popover" role="tooltip">\uBCFC\uB968 \uB044\uAE30</span>',e.volume_off||"OFF","  </button>",'  <span class="sr-only vctrl-status" aria-live="polite" aria-atomic="true"></span>',"</div>"].join("")}return['<div class="'+o.wrapClass+'" style="'+m+'"'+k+">",'  <span class="vdo__spacer" aria-hidden="true"></span>',"  <video "+q+' class="video" aria-label="'+o.a11yLabel+'"></video>',o.click_toggle?'  <span class="vdo__tap-indicator" aria-hidden="true"><span class="vdo__tap-icon vdo__tap-icon-play"></span><span class="vdo__tap-icon vdo__tap-icon-pause"><span class="bar"></span><span class="bar"></span></span></span>':"",x,"</div>"].join("")}function I(r){var t=R({vdos:[],icons:null,log:!1,exclusiveAudio:!0,viewportChecker:null},r||{}),e={_vctrlBound:!1,_clickToggleBound:!1,_mediaBusBound:!1,_vdoObserver:null,_vdoMap:null};function n(){if(t.log)try{console.info.apply(console,arguments)}catch(a){}}function o(a,u){if(t.log)try{console.info(a,u)}catch(d){}}function i(a,u){try{console.error(a)}catch(d){}!t.log||typeof u=="undefined"||o("[DWorksVideo][debug] detail:",u)}function c(a){N(a)}function _(a,u){te(a,u,{log:t.log,exclusiveAudio:t.exclusiveAudio,onPlaybackBlocked:t.onPlaybackBlocked})}function m(){e._vctrlBound||(e._vctrlBound=!0,pe())}function k(a){if(!(!a||!a.length)){var u=typeof y.IntersectionObserver=="function";if(!u){var d=t.viewportChecker;if(!d||!d.enabled||!d.$)return;for(var l=d.$,O=d.pluginName||"viewportChecker",w=0;w<a.length;w++){var p=a[w];if(!(!p||!p.mount)&&!(!p.play_on_enter&&!p.pause_on_leave)){var M=p.observe||p.mount,F=l(M),U=l(p.mount);if(!(!F.length||!U.length)){var J=U.find("video").first();J.length&&(function(C,V,B){try{l(C)[O]({repeat:!0,callbackFunction:function(L,P){P==="add"?B.play_on_enter&&g(V,!0,{log:t.log,onPlaybackBlocked:t.onPlaybackBlocked}):B.pause_on_leave&&g(V,!1)}})}catch(L){}})(F.get(0),J.get(0),p)}}}return}if(e._vdoObserver){try{e._vdoObserver.disconnect()}catch(C){}e._vdoObserver=null}e._vdoMap=new WeakMap;var oe=[0,.01,.1,.25,.35,.5,.75,1],Q=new IntersectionObserver(function(C){for(var V=0;V<C.length;V++){var B=C[V],L=e._vdoMap.get(B.target);if(L){var P=L.videoEl,S=L.opt||{},ae=typeof S.view_threshold=="number"?S.view_threshold:.35,ie=B.isIntersecting&&B.intersectionRatio>=ae;ie?S.play_on_enter&&g(P,!0,{log:t.log,onPlaybackBlocked:t.onPlaybackBlocked}):S.pause_on_leave&&g(P,!1)}}},{threshold:oe});e._vdoObserver=Q;for(var G=0;G<a.length;G++){var b=a[G];if(!(!b||!b.mount)&&!(!b.play_on_enter&&!b.pause_on_leave)){var ne=b.observe||b.mount,j=W(ne);if(j){var Y=W(b.mount);if(Y){var Z=Y.querySelector("video");Z&&(e._vdoMap.set(j,{videoEl:Z,opt:b}),Q.observe(j))}}}}}}function q(){for(var a=t.vdos||[],u=t.icons||h,d=0;d<a.length;d++){var l=a[d];if(!(!l||!l.mount)){var O=l.url;if(!O){i("[DWorksVideo] \uBE44\uB514\uC624 \uACBD\uB85C(url)\uAC00 \uB204\uB77D\uB418\uC5C8\uC2B5\uB2C8\uB2E4. index: "+d,{index:d,item:l});continue}var w=T(O,l,u);if(l.vctrl!==!1&&!l.vid)try{var p=String(w||"").match(/<video\s+[^>]*id=\"([^\"]+)\"/i);p&&p[1]&&(l.vid=p[1])}catch(F){}var M=W(l.mount);M?M.innerHTML=w:i("[DWorksVideo] \uC5D8\uB9AC\uBA3C\uD2B8\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. mount: "+l.mount,{index:d,mount:l.mount,item:l}),l.vid&&c(l.vid)}}return m(),e._clickToggleBound||(he(),e._clickToggleBound=!0),e._mediaBusBound||(ye(),e._mediaBusBound=!0),k(a),n("[DWorksVideo] init ok"),D}function x(){if(e._vdoObserver){try{e._vdoObserver.disconnect()}catch(a){}e._vdoObserver=null}e._vdoMap=null,e._vctrlBound&&ge(),e._vctrlBound=!1,e._clickToggleBound&&be(),e._clickToggleBound=!1,e._mediaBusBound&&me(),e._mediaBusBound=!1,n("[DWorksVideo] destroy ok")}var D={init:q,destroy:x,vdoVolume:_,syncVctrlA11y:c,controlVideo:g,vdoTag:function(a,u){return T(a,u,t.icons||h)},icons:t.icons||h};return D}var K={create:I,controlVideo:g,vdoTag:function(r,t){return T(r,t,h)},icons:h,calcAspectPad:A};typeof y.__DWORKS_EXPORT__=="function"&&y.__DWORKS_EXPORT__(K);typeof y.window!="undefined"&&(y.DWorksVideo=y.DWorksVideo||K);var X=K;var re={video:X,createVideo:I,utils:{controlVideo:g,vdoTag:T,calcAspectPad:A,icons:h}};typeof globalThis!="undefined"&&typeof globalThis.window!="undefined"&&(globalThis.DWorks=globalThis.DWorks||re);var ke=re;return fe(we);})();
/*! dworks-video.js | ES5 | exporter handshake: window.__DWORKS_EXPORT__(mod) */
//# sourceMappingURL=dworks.min.js.map
