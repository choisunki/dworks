/*!
 * @name dworks-image-load
 * @version v1.1.1
 * @author Choi Sunki <sk@daltan.net>
 * @description DWorks image load utility
 * @repository https://github.com/choisunki/dworks
 * @license MIT
 * @preserve
 */
function M(s,x={}){let e=Object.assign({cmessage:!1,lazyAttrs:["data-src","data-lazy","data-original"],cbMode:"section",timeoutMs:0},x),l=typeof NodeList!="undefined"&&s instanceof NodeList||Array.isArray(s)?s:[s],S=e.cbMode==="all",g=l.length,c=()=>{typeof e.cb=="function"&&e.cb()},d=()=>{if(!S){c();return}g-=1,g<=0&&c()};if(l.length===0){c();return}l.forEach(f=>{if(!f||!f.querySelectorAll){d();return}let p=f.querySelectorAll("img"),b=p.length,a=0;if(b===0){e.cmessage&&console.log("%c Load Complete 0ea","background: green; color: #111; border-radius: 2px; padding: 5px 10px;"),d();return}let k=()=>{a+=1,e.cmessage&&console.log(`%c => Loading ${a}ea`,"background: #111; color: green; border-radius: 2px;"),a===b&&(e.cmessage&&console.log(`%c Load Complete ${a}ea`,"background: green; color: #111; border-radius: 2px; padding: 5px 10px;"),d())};p.forEach(r=>{let t=new Image,m=!1,i=null,n=()=>{m||(m=!0,i&&(clearTimeout(i),i=null),k())};t.onload=n,t.onerror=n;let y=Array.isArray(e.lazyAttrs)?e.lazyAttrs:[],o="";if(r.currentSrc&&(o=r.currentSrc),!o&&r.src&&(o=r.src),o||(o=r.getAttribute("src")||""),!o)for(let u=0;u<y.length;u+=1){let A=r.getAttribute(y[u]);if(A){o=A;break}}if(!o){n();return}let h=Number(e.timeoutMs)||0;h>0&&(i=setTimeout(()=>{n()},h)),t.src=o,t.complete&&(t.naturalWidth>0?n():t.onerror&&t.onerror())})})}var L={dload:M};typeof globalThis!="undefined"&&typeof globalThis.window!="undefined"&&(globalThis.DWorksImageLoad=globalThis.DWorksImageLoad||L);var z=L;export{z as default,M as dload};
//# sourceMappingURL=dworks-image-load.esm.min.js.map
